<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>DRUP'S - IHM</title>
    <script type="text/javascript" src="./index.js" defer=""></script>
    <link rel="stylesheet" href="./index.css" />
  </head>
  <body>
    <div class="Painel">
      <div class="PainelStatusAlarme">
        <h1>STATUS</h1>
        <h2>SEM ALARMES</h2>
        <h3>ALARME AMARELO</h3>
        <h4>ALARME VERMELHO</h4>
        <div class="PainelStatusAlarme-Verde"></div>
        <div class="PainelStatusAlarme-Amarelo"></div>
        <div class="PainelStatusAlarme-Vermelho"></div>
      </div>
      <div class="PainelComando">
        <span class="P8"></span>
        <span class="P7"></span>
        <span class="P6"></span>
        <span class="P5"></span>
        <span class="P4"><span class="texto">4</span> </span>
        <span class="P3"><span class="texto">3</span></span>
        <span class="P2"><span class="texto">2</span></span>
        <span class="P1"><span class="texto">1</span></span>
        <div class="Seletora">
          <span class="TraçoSeletora"></span>
        </div>
        <div class="SinopticoCargaProtegida"></div>
        <div class="LabelCargaSegura">CARGA PROTEGIDA</div>
        <div class="BotãoEmergencia">
          <div class="LabelConfirmaçãoDesligamento">
            CONFIRMAÇÃO<br />
            DELIGAMENTO
          </div>
          <button class="ConfimaçãoDesligar"></button>
        </div>
        <h1>PROGRAMA</h1>
        <div class="CiaxaPainelComando">
          <button class="Posição4">CARGA PROTEGIDA</button>
          <button class="Posição3">CONTROLE IHM</button>
          <button class="Posição2">BY-PASS</button>
          <button class="Posição1">DESLIGAR</button>
        </div>
      </div>
      <div class="PainelBypassGeral"></div>
      <div class="IHM">
        <div class="power-bar">
          <div class="power-bar-fill"></div>
          <div class="dashed-line"></div>
          <div class="power-bar-text">100 kW</div>
          <div class="voltage-frequency">
            <span>479 V</span>
            <span>60 Hz</span>
          </div>
          <div class="scale">
            <span>0</span>
            <span>1600.0 kW</span>
          </div>
        </div>
        <div class="Status_da_unidade">
          <h1>UNIT STATUS / NO-BREAK LOAD</h1>
          <h2>Unit in bypass</h2>
          <h3>Unit in emergency mode</h3>
          <h4>Unit in normal mode</h4>
          <h5>Press SL AGAIN</h5>
        </div>
        <div class="Status_alarme">
          <h1>ALARM STATUS</h1>
          <h2>QDM OFF</h2>
          <div class="Verde"></div>
          <div class="Amarelo"></div>
          <div class="Vermelho"></div>
        </div>
        <div class="Btest">
          <button class="Lamps">LAMPS TEST</button>
          <button class="Horn">STOP HORN</button>
          <button class="Idioma">LANGUAGE</button>
        </div>
        <div class="Controle">
          <button class="Alarme">ALARMS</button>
          <button class="Status">STATUS</button>
          <button class="Contr">CONTROL</button>
        </div>
        <div class="Config">
          <button class="Configuração">SETTINGS</button>
        </div>
        <div class="HORA"></div>
        <!-- Elementos do gerador dentro mostrado no Display da IHM-->
        <div class="Gerador">
          <div class="Caixadisjuntores">
            <h1>MAINS</h1>
            <h2>V/F OK</h2>
            <h3>V/F OK</h3>
            <h4>KS</h4>
            <h5>MIMIC</h5>
            <input id="QD3" type="checkbox" />
            <label for="QD3">
              <div class="DJQD3"></div>
            </label>
            <input id="QD1" type="checkbox" />
            <label for="QD1">
              <div class="DJQD1"></div>
            </label>
            <input id="QD2" type="checkbox" />
            <label for="QD2">
              <div class="DJQD2"></div>
            </label>
            <div class="TrianguloEntrada"></div>
            <div class="TrianguloSaida"></div>
            <div class="Linha"></div>
            <div class="Linha1"></div>
            <div class="Linha2"></div>
            <div class="Linha3"></div>
            <div class="Linha4"></div>
            <div class="Linha5"></div>
            <div class="Linha6"></div>
            <div class="Linha7"></div>
            <div class="Linha8"></div>
            <div class="Linha9"></div>
            <div class="Linha10"></div>
            <div class="Circulo"></div>
            <div class="Circulo1"></div>
            <div class="Circulo2"></div>
            <div class="Circulo3"></div>
            <div class="Circulo4"></div>
            <div class="Circulo5"></div>
            <div class="Circulo6"></div>
            <div class="Circulo7"></div>
            <div class="Bobina"></div>
            <div class="Bobina1"></div>
            <div class="Sinotico">
              <div class="SYN">SYN</div>
              <div class="FUE">FUE</div>
              <div class="AXL">AXL</div>
              <div class="PNL">PNL</div>
              <div class="MOD">MOD</div>
              <div class="DC">DC</div>
              <div class="KS">KS</div>
              <div class="PAR">PAR</div>
            </div>
            <div class="SBOFF">SB: OFF</div>
            <div class="ShortBreak">
              <h6>QD5 OFF</h6>
              <h7>QD6 ON</h7>
            </div>
          </div>
          <div class="Base"></div>
          <!-- Imagens do gerador-->
          <div class="CaixaCentro">
            <img src="CENTRO.png" class="imagem-destaque" />
          </div>
          <div class="CaixaMotor">
            <img src="MOTOR.png" class="imagem-destaque" />
          </div>
          <div class="CaixaAcumulador">
            <img src="ACUMULADOR.png" class="imagem-destaque" />
          </div>
        </div>
        <div class="Mode">
          <span>MODE</span>
          <h1>PROG. SWITCH</h1>
          <h2>OFF</h2>
          <h3>BYPASS</h3>
          <h4>HMI</h4>
          <h5>SECURED</h5>
          <div class="Typebypass">
            <span>BYPASS TYPE</span>
            <h1>STOP</h1>
            <h2>/ RUN</h2>
          </div>
          <div class="StatusMode">
            <h1>HMI MODE</h1>
            <h2>LOCAL</h2>
          </div>
        </div>
      </div>
    </div>
    <script>
document.addEventListener("DOMContentLoaded", function () {
  const seletora = document.querySelector(".Seletora")

  const posicoes = {
    Posição4: 0, // CARGA PROTEGIDA
    Posição3: -40, // CONTROLE IHM
    Posição2: -100, // BY-PASS
    Posição1: -160, // DESLIGAR
  }

  const modos = {
    Posição4: "h5", // SECURED
    Posição3: "h4", // HMI
    Posição2: "h3", // BYPASS
    Posição1: "h2", // OFF
  }

  Object.keys(posicoes).forEach((classe) => {
    document.querySelector(`.${classe}`).addEventListener("click", function () {
      // Rotaciona a seletora
      const angulo = posicoes[classe]
      seletora.style.transform = `rotate(${angulo}deg)`

      // Atualiza as cores dos elementos na <div class="Mode">
      const modeDiv = document.querySelector(".Mode")
      const tags = modeDiv.querySelectorAll("h2, h3, h4, h5")
      tags.forEach((tag) => {
        tag.style.color = "gray"
      })

      const destaque = modeDiv.querySelector(modos[classe])
      if (destaque) {
        destaque.style.color = "green"
      }

      // Ativa ou desativa o botão ".Contr"
      const botaoContr = document.querySelector(".Contr")
      if (classe === "Posição3") {
        botaoContr.style.pointerEvents = "auto"
        botaoContr.style.opacity = "1"
        botaoContr.style.cursor = "pointer"
      } else {
        botaoContr.style.pointerEvents = "none"
        botaoContr.style.opacity = "0.6"
        botaoContr.style.cursor = "not-allowed"
      }

      // Exibe popup se for a posição 1 (DESLIGAR)
      if (classe === "Posição1") {
        mostrarPopup()
      }
    })
  })

  // ✅ Função para mostrar o popup
  function mostrarPopup() {
    if (document.querySelector(".popup-aviso")) return // já existe

    const popup = document.createElement("div")
    popup.className = "popup-aviso"
    popup.style.position = "fixed"
    popup.style.width = "10cm"
    popup.style.height = "6cm"
    popup.style.top = "50%"
    popup.style.left = "50%"
    popup.style.transform = "translate(-50%, -50%)"
    popup.style.backgroundColor = "white"
    popup.style.border = "2px solid red"
    popup.style.zIndex = "9999"
    popup.style.padding = "1rem"
    popup.style.color = "red"
    popup.style.fontWeight = "bold"
    popup.style.boxShadow = "0 0 10px rgba(0,0,0,0.5)"
    popup.style.position = "fixed"

    popup.innerHTML = `
      <div style="display: flex; justify-content: flex-end;">
        <button class="fechar-popup" style="background:none;border:none;font-size:18px;cursor:pointer;">✖</button>
      </div>
      <div style="text-align: center; margin-top: -10px;">
        <h2>⚠️ WARNING</h2>
        <p>If you press on <strong>OFF CONFIRMATION</strong> button for 5s, all the bypass breakers will open and</p>
        <p><strong>THE LOAD WILL NOT BE SUPPLIED ANYMORE</strong></p>
        <p>Otherwise, set program switch on <strong>BY-PASS</strong>.</p>
      </div>
    `

    document.body.appendChild(popup)

    document.querySelector(".fechar-popup").addEventListener("click", function () {
      popup.remove()
    })
  }

  // ✅ Pressionar por 5 segundos marca os checkboxes
  const btnDesligar = document.querySelector(".ConfimaçãoDesligar")
  let timerPressiona

  btnDesligar.addEventListener("mousedown", function () {
    timerPressiona = setTimeout(() => {
      const checkboxes = ["QD1", "QD2"]
      checkboxes.forEach((id) => {
        const checkbox = document.getElementById(id)
        if (checkbox) {
          checkbox.checked = true
        }
      })
    }, 5000)
  })

  btnDesligar.addEventListener("mouseup", function () {
    clearTimeout(timerPressiona)
  })

  btnDesligar.addEventListener("mouseleave", function () {
    clearTimeout(timerPressiona)
  })
})

// Atualização da hora
function atualizarHora() {
  const agora = new Date()
  const horas = agora.getHours().toString().padStart(2, "0")
  const minutos = agora.getMinutes().toString().padStart(2, "0")
  const segundos = agora.getSeconds().toString().padStart(2, "0")
  document.querySelector(
    ".HORA"
  ).textContent = `${horas}:${minutos}:${segundos}`
}

setInterval(atualizarHora, 1000) // atualiza a cada segundo
atualizarHora() // mostra logo ao carregar

    
    </script>
  </body>
</html>
